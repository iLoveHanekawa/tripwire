generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model users {
  id    Int      @id @default(autoincrement())
  name  String?  @db.VarChar(255)
  email String?  @db.VarChar(255)
  age   Int?
  gpa   Decimal?
}

model Role {
  id                Int                 @id @default(autoincrement())
  name              String              @unique
  createdAt         DateTime            @default(now())
  updatedAt         DateTime            @updatedAt
  ModelHasRole      ModelHasRole[]
  permissions RoleHasPermission[]
}

model Permission {
  id                 Int                  @id @default(autoincrement())
  name               String               @unique
  createdAt          DateTime             @default(now())
  updatedAt          DateTime             @updatedAt
  ModelHasPermission ModelHasPermission[]
  roles  RoleHasPermission[]
}

model ModelHasRole {
  modelId Int
  roleId  Int

  model String // You may need to adjust this depending on your specific models
  role  Role   @relation(fields: [roleId], references: [id])

  @@id([modelId, roleId])
}

// ModelHasPermissions
model ModelHasPermission {
  modelId      Int
  permissionId Int

  model      String // You may need to adjust this depending on your specific models
  permission Permission @relation(fields: [permissionId], references: [id])

  @@id([modelId, permissionId])
}

// RoleHasPermissions
model RoleHasPermission {
  roleId       Int
  permissionId Int

  role       Role       @relation(fields: [roleId], references: [id])
  permission Permission @relation(fields: [permissionId], references: [id])

  @@id([roleId, permissionId])
}
